<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SplitAdmin | Дашборд</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <div class="toast-container" id="toastContainer"></div>
    <div class="admin-container">
      <!-- Сайдбар -->
      <aside class="sidebar">
        <div class="logo">
          <i class="fas fa-code-branch"></i>
          <span>SplitAdmin</span>
        </div>
        <nav class="menu">
          <a href="index.html" class="menu-item active">
            <i class="fas fa-chart-line"></i>
            <span>Дашборд</span>
          </a>
          <a href="contractors.html" class="menu-item">
            <i class="fas fa-users"></i>
            <span>Подрядчики</span>
          </a>
          <a href="company.html" class="menu-item">
            <i class="fas fa-building"></i>
            <span>Компания</span>
          </a>
          <a href="nomenclature.html" class="menu-item">
            <i class="fas fa-boxes"></i>
            <span>Номенклатура</span>
          </a>
          <a href="#" id="logoutBtn" class="menu-item">
            <i class="fas fa-right-from-bracket"></i>
            <span>Выход</span>
          </a>
        </nav>
      </aside>

      <!-- Основной контент -->
      <main class="content">
        <header class="header">
          <div class="header-title">
            <h1>Дашборд</h1>
            <p>Обзор статистики и активности</p>
          </div>
          <button class="btn btn-primary" id="generateLinkBtn">
            <i class="fas fa-link"></i>
            Сгенерировать ссылку
          </button>
        </header>

        <!-- Статистика -->
        <div class="dashboard-grid">
          <div class="stats-section">
            <h2>Статистика</h2>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-receipt"></i>
                </div>
                <div class="stat-info">
                  <h3>Всего транзакций</h3>
                  <p class="stat-number">124</p>
                  <span class="stat-trend">+12% за месяц</span>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="stat-info">
                  <h3>Общая сумма</h3>
                  <p class="stat-number">458 200 ₽</p>
                  <span class="stat-trend">+18% за месяц</span>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-user-tie"></i>
                </div>
                <div class="stat-info">
                  <h3>Активные подрядчики</h3>
                  <p class="stat-number">8</p>
                  <span class="stat-trend">+2 за месяц</span>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-percentage"></i>
                </div>
                <div class="stat-info">
                  <h3>Конверсия</h3>
                  <p class="stat-number">78%</p>
                  <span class="stat-trend">+5% за месяц</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Последние ссылки -->
          <div class="recent-section">
            <h2>Последние платежные ссылки</h2>
            <div class="links-list">
              <div class="link-item">
                <div class="link-info">
                  <h4>Заказ #12345</h4>
                  <p>19 200 ₽ • 5 мин назад</p>
                </div>
                <div class="link-status success">Активна</div>
              </div>
              <div class="link-item">
                <div class="link-info">
                  <h4>Заказ #12344</h4>
                  <p>8 500 ₽ • 2 часа назад</p>
                </div>
                <div class="link-status paid">Оплачена</div>
              </div>
              <div class="link-item">
                <div class="link-info">
                  <h4>Заказ #12343</h4>
                  <p>12 300 ₽ • 5 часов назад</p>
                </div>
                <div class="link-status expired">Истекла</div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Модальное окно генерации ссылки -->
    <div class="modal" id="generationModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Генерация платежной ссылки</h2>
          <span class="close">&times;</span>
        </div>

        <div class="modal-body">
          <!-- Прогресс-бар -->
          <div class="progress-bar">
            <div class="progress-step active" data-step="1">
              <div class="step-number">1</div>
              <span>Подрядчики</span>
            </div>
            <div class="progress-step" data-step="2">
              <div class="step-number">2</div>
              <span>Компания</span>
            </div>
            <div class="progress-step" data-step="3">
              <div class="step-number">3</div>
              <span>Подтверждение</span>
            </div>
          </div>

          <!-- Шаг 1: Подрядчики -->
          <div class="step-content active" data-step="1">
            <div class="form-group">
              <label>Выберите подрядчика</label>
              <div class="select-wrapper">
                <select class="form-select" id="contractorSelect">
                  <option value="">-- Выберите подрядчика --</option>
                </select>
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
            <div class="form-group">
              <label>Сумма для подрядчика (₽)</label>
              <input
                type="number"
                class="form-input"
                id="contractorAmount"
                placeholder="2500"
              />
            </div>
            <button class="btn btn-next">
              Далее
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>

          <!-- Шаг 2: Компания -->
          <div class="step-content" data-step="2">
            <div class="company-info">
              <h3>Данные компании</h3>
              <div class="company-details">
                <div class="detail-item">
                  <span class="detail-label">Название:</span>
                  <span class="detail-value">ООО "ВашаКомпания"</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ИНН:</span>
                  <span class="detail-value">7712345678</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Расчетный счет:</span>
                  <span class="detail-value">40702810123456789012</span>
                </div>
              </div>
            </div>

            <!-- Блок товаров -->
            <div class="nomenclature-header">
              <h3>Добавление товаров</h3>
              <button class="btn btn-add" type="button">
                <i class="fas fa-plus"></i>
                Добавить товар
              </button>
            </div>

            <div class="nomenclature-list">
              <div class="nomenclature-item">
                <div class="select-wrapper">
                  <select id="select-product" class="form-select">
                    <option value="">-- Выберите товар --</option>
                  </select>
                  <i class="fas fa-chevron-down"></i>
                </div>
                <input type="number" class="form-input" placeholder="300" />
                <button class="btn btn-remove">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>

            <!-- Поле комиссии -->
            <div class="form-group">
              <label>Комиссия (₽)</label>
              <input
                type="number"
                class="form-input"
                id="commissionAmount"
                placeholder="0"
                required
              />
            </div>

            <div class="step-buttons">
              <button class="btn btn-prev">
                <i class="fas fa-arrow-left"></i>
                Назад
              </button>
              <button class="btn btn-next">
                Далее
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </div>

          <!-- Шаг 3: Подтверждение -->
          <div class="step-content" data-step="3">
            <h3>Итоговая информация</h3>

            <div class="summary-grid">
              <div class="summary-section">
                <h4>Распределение платежа</h4>
                <div class="summary-item">
                  <span class="summary-label">Подрядчик:</span>
                  <span class="summary-value" data-summary="contractor"
                    >ИП Калинин - 2 500 ₽</span
                  >
                </div>
                <div class="summary-item">
                  <span class="summary-label">Компания (включая услуги):</span>
                  <span class="summary-value" data-summary="company"
                    >ООО "ВашаКомпания" - 16 000 ₽</span
                  >
                </div>
                <div class="summary-item">
                  <span class="summary-label">Комиссия:</span>
                  <span class="summary-value" data-summary="commission"
                    >0 ₽</span
                  >
                </div>
              </div>

              <div class="summary-section">
                <h4>Услуги</h4>
                <div class="nomenclature-summary">
                  <!-- Товары будут здесь -->
                </div>
              </div>
            </div>

            <div class="summary-total">
              <div class="total-amount">
                <span>Итого к оплате:</span>
                <span class="total-number">19 200 ₽</span>
              </div>
            </div>

            <div class="step-buttons">
              <button class="btn btn-prev">
                <i class="fas fa-arrow-left"></i>
                Назад
              </button>
              <button class="btn btn-primary" id="generateFinalBtn">
                <i class="fas fa-link"></i>
                Сгенерировать ссылку
              </button>
            </div>
          </div>

          <!-- Шаг 4: Результат -->
          <div class="step-content" data-step="4">
            <div class="success-result">
              <div class="success-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3>Ссылка успешно создана!</h3>
              <p>Сумма: <strong></strong></p>

              <div class="generated-link">
                <input
                  type="text"
                  value="https://pay.tinkoff.ru/example-link"
                  readonly
                />
                <button class="btn btn-copy">
                  <i class="fas fa-copy"></i>
                </button>
              </div>

              <button class="btn btn-primary" id="closeModalBtn">
                <i class="fas fa-check"></i>
                Готово
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/dashboard.js"></script>
  </body>
</html>
